Agis en tant que D√©veloppeur Full-Stack Senior et Analyste Quantitatif expert en options financi√®res (sp√©cialis√© dans la Prime de Risque de Volatilit√© - VRP - et les m√©thodologies math√©matiques type Tastytrade). 

Ton objectif est de coder une application web compl√®te en Python agissant comme un "Robo-Advisor" pour le trading d'options. L'outil doit analyser les donn√©es de march√© en temps r√©el et recommander la strat√©gie math√©matiquement optimale √† l'instant T, tout en respectant strictement un budget maximal impos√©.

Utilise le framework `Streamlit` pour l'interface web (UI) et `yfinance`, `pandas`, `numpy`, et `scipy` pour le backend (r√©cup√©ration des donn√©es, calcul du mod√®le de Black-Scholes pour le Delta et les probabilit√©s).

Voici le cahier des charges strict :

### 1. INPUTS UTILISATEUR (Sidebar Streamlit)
- Un champ texte : `Ticker` (ex: SPY, AAPL, TSLA). Valeur par d√©faut : SPY. √ßa doit √™tre un champ de recherche avec auto-compl√©tion.
- Un champ num√©rique : `Budget Maximum Risqu√© ($)`. C'est le capital maximum absolu que l'utilisateur est pr√™t √† perdre ou bloquer en marge. L'outil ne doit JAMAIS proposer une strat√©gie dont le Max Risk d√©passe ce montant. Valeur par d√©faut : 1000.
- Un menu d√©roulant : `Biais Directionnel` (Haussier, Baissier, Neutre). Valeur par d√©faut : Neutre.

### 2. MOTEUR DE DONN√âES (Backend)
D√®s que l'utilisateur clique sur "Analyser", le script doit r√©cup√©rer dynamiquement :
- Le prix actuel (Spot) du Ticker.
- Le niveau actuel de l'indice de la peur (Ticker : `^VIX`).
- Calcul de l'IV Rank (Implied Volatility Rank) sur 1 an (252 jours) : R√©cup√®re l'historique de la volatilit√© implicite. Si l'API gratuite ne la fournit pas, calcule la Volatilit√© Historique (√©cart-type des rendements) sur 1 an comme proxy. Formule de l'IV Rank : `100 * (IV Actuelle - IV Min 52s) / (IV Max 52s - IV Min 52s)`.
- La cha√Æne d'options (Options Chain) : Filtre pour trouver la date d'expiration (DTE) la plus proche de **45 jours** (fourchette acceptable : 35 √† 60 jours).
- Calcul des Grecques : Impl√©mente une fonction Black-Scholes via `scipy.stats` pour calculer le Delta de chaque option trouv√©e.

### 3. MATRICE DE D√âCISION ALGORITHMIQUE (Le Cerveau)
L'algorithme doit parser la cha√Æne d'options (~45 DTE) et s√©lectionner la strat√©gie selon ces r√®gles :

- CAS A : Volatilit√© √âlev√©e (IV Rank > 50 ou VIX > 20) -> VENTE DE PRIME
  - Neutre : **Iron Condor**. (Vendre Call et Put √† ~0.16 Delta. Acheter protections).
  - Haussier : **Bull Put Spread**. (Vendre Put √† ~0.20 Delta. Acheter protection inf√©rieure).
  - Baissier : **Bear Call Spread**. (Vendre Call √† ~0.20 Delta. Acheter protection sup√©rieure).
  - *Sizing :* Largeur du spread * 100 - Prime re√ßue = Risque Max. Adapte les strikes de protection pour que le Risque Max soit <= Budget Maximum.

- CAS B : Volatilit√© Faible (IV Rank < 20 et VIX < 15) -> ACHAT DE TEMPS
  - Haussier : **PMCC (Poor Man's Covered Call / Diagonal Spread)**. Achat Call LEAPS (> 200 DTE, Delta > 0.80), Vente Call court (~45 DTE, Delta ~0.30).
  - Neutre : **Calendar Spread**. Achat et Vente √† la monnaie sur des expirations diff√©rentes (Vente √† ~20 DTE, Achat √† ~60 DTE).
  - *Sizing :* D√©bit Net Pay√© * 100 = Risque Max. Doit √™tre <= Budget Maximum.

- CAS C : Volatilit√© Moyenne (20 <= IV Rank <= 50) 
  - Proposer des Spreads directionnels classiques ou la strat√©gie "Cash Secured Put" (The Wheel) si le budget le permet (Budget > Prix de l'action * 100).

### 4. OUTPUTS : LE TABLEAU DE BORD (Interface UI)
G√©n√®re une interface visuelle, √©l√©gante et financi√®re contenant :
1. CONTEXTE MACRO : Affichage du Spot, du VIX et de l'IV Rank (utilise `st.metric` avec un code couleur : Rouge = Volatilit√© haute/Danger, Vert = Volatilit√© basse/Calme).
2. LE VERDICT : Nom de la strat√©gie recommand√©e avec 2 phrases expliquant l'avantage math√©matique actuel.
3. TICKET D'ORDRE (LEGS) : Un tableau propre affichant les contrats exacts √† ex√©cuter. Colonnes : [Action (Buy/Sell)] | [Type (Call/Put)] | [Strike] | [Expiration] | [DTE] | [Prix unitaire].
4. M√âTRIQUES FINANCI√àRES :
   - Cr√©dit net re√ßu ou D√©bit net pay√© en $.
   - **Risque Maximal Exact ($)** (qui prouve que le budget est respect√©).
   - Profit Maximal ($).
   - **Probabilit√© de Profit (PoP %)** : Approxim√©e via le Delta (ex: Vente d'un spread √† 0.16 Delta ‚âà 84% de chances de r√©ussite).
5. LE PLAN DE VOL (Triggers M√©caniques de Sortie) : Affiche des encarts d'alerte (`st.info` / `st.warning`) avec des consignes strictes :
   - üéØ TAKE PROFIT : "Placez un ordre limite (GTC) pour racheter la position et encaisser d√®s que le profit atteint **[Calculer et afficher 50% du Profit Max en $]**."
   - ‚è±Ô∏è TIME STOP : "Cl√¥turez obligatoirement la position le **[Calculer et afficher la Date d'Expiration exacte - 21 jours]** (√† 21 DTE), quels que soient les gains/pertes, pour √©craser le risque Gamma."

### 5. CONTRAINTES TECHNIQUES DE CODE
- Fournis le code Python complet, propre, modulaire et comment√© dans **un seul fichier `app.py`**.
- G√®re les exceptions avec des blocs `try/except` (ex: Ticker invalide, march√© ferm√© rendant les cha√Ænes vides, budget trop faible pour la taille standard d'un contrat de 100 actions).
- Ajoute au d√©but de ta r√©ponse les instructions d'installation (`pip install...`) et la commande pour lancer l'application locale Streamlit.